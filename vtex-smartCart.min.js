/**
* VTEX Smart Cart
* @author Carlos Vinicius [ QUATRO DIGITAL ]
* @version 4.4
* @license MIT <http://pt.wikipedia.org/wiki/Licen%C3%A7a_MIT>
*/
"function"!=typeof jQuery.fn.vtexPopUp2&&(jQuery.fn.vtexPopUp2=function(q){var e=jQuery(this);if(1>e.length)return e;var b=jQuery("body"),h=b.find(".boxPopUp2"),m="object"==typeof console;1>h.length&&(h=jQuery('<div class="boxPopUp2"><div class="boxPopUp2-wrap"><span class="boxPopUp2-close"></span><div class="boxPopUp2-content"></div></div></div>'),b.prepend(h),h.after('<div class="boxPopUp2-overlay"></div>'));var d=jQuery.extend({popupType:null,closeContent:null,popupClass:"",quickViewClass:".quickViewLink",
initCallback:function(){},showCallback:function(){},closeCallback:function(){}},q);q=h.find(".boxPopUp2-close");var l=h.find(".boxPopUp2-content"),u=b.find(".boxPopUp2-close, .boxPopUp2-overlay"),z=b.find(".boxPopUp2-overlay"),r=jQuery(document);null!=d.closeContent&&q.html(d.closeContent);var c={positioning:function(){var a=r.scrollTop(),c=jQuery(window).height(),b=h.outerHeight(!0);h.css("top",a+(b>=c?20:(c-b)/2)+"px")},show:function(a){a=a||{};z.fadeTo("fast",0.5,function(){h.show().addClass("popupOpened");
"boolean"===typeof a.loading&&!0===a.loading?c.showLoading():c.hideLoading();"function"===typeof a.callback&&a.callback();d.showCallback(h)})},hideLoading:function(){l.filter(":visible").css("background-image","none")},showLoading:function(){l.filter(":visible").css("background-image",'url("/arquivos/ajax-loader.gif")')},close:function(a){a=a||{};var c=function(){z.fadeOut("fast");h.fadeOut("fast",function(){l.empty()});l.attr("class","boxPopUp2-content");h.attr("class","boxPopUp2")};"boolean"==typeof a.closeNow&&
!0==a.closeNow&&c();1>u.filter(".boxPopUp2-clickActive").length&&(u.addClass("boxPopUp2-clickActive").bind("click",function(){"function"===typeof a.clickCallback?a.clickCallback():d.closeCallback(h);c()}),r.bind("keyup",function(a){27==(a.keyCode?a.keyCode:a.which)&&c()}));if(e.hasClass("autoClose")){var b=(e.attr("class")||"").split("ac_").pop().split(" ").shift();if(isNaN(parseFloat(b)))return m&&console.log("[Erro] O tempo informado (em segundos) n\u00e3o \u00e9 um valor num\u00e9rico: \u201c"+
b+"\u201d"),!1;setTimeout(function(){c()},1E3*b)}},setType:function(a){if(a.hasClass("quickViewLink"))c.quickView(a);else if(a.hasClass("giftListWrap"))c.giftList(a);else if(a.hasClass("installmentInfoTpl"))c.paymentForms(a);else if(a.hasClass("shipping-value"))c.calculateShipping(a);else if(a.hasClass("freeContent"))c.freeContent(a);else if(a.hasClass("boxPopUp2"))c.closeNow(a);else if(a.hasClass("referAFriendTpl"))c.productReferAFriend(a);else if(0<a.filter("#btnReferAFriend").length)c.giftListReferFriend(a);
else if(0<a.filter("#lnkPubliqueResenha").length)c.postRatingComment(a);else if(0<a.filter("#palerta").length)c.cartCheckoutAlert(a);else if(a.hasClass("lnkAddPhoto"))d.popupType="minhaContaFoto",c.userAccount(a);else return!1},checkType:function(a){"cadastroCliente"===d.popupType||"minhaContaFoto"===d.popupType?c.userAccount(a):"newsletter"===d.popupType?c.newsletter(a):"quickview"===d.popupType?c.quickView(a):"giftlist"===d.popupType?c.giftList(a):"paymentforms"===d.popupType?c.paymentForms(a):
"shipping"===d.popupType?c.calculateShipping(a):"string"==typeof d.popupType&&"freecontent"===d.popupType.toLowerCase()?c.freeContent(a):"closenow"===d.popupType?c.closeNow(a):"GiftListReferAFriend"===d.popupType?c.giftListReferFriend(a):"postRatingComment"===d.popupType?c.postRatingComment(a):c.freeContent(a)},exec:function(){e.each(function(){var a=$(this);null===d.popupType?c.setType(a):!1===c.checkType(a)&&c.setType(a)});d.initCallback()},userAccount:function(a){var b="";"cadastroCliente"===d.popupType?
b="signInPopups":"minhaContaFoto"===d.popupType&&(b="profilePhoto");a.unbind().removeAttr("onclick");var e=a.attr("href")||"";a.bind("mouseenter",function(){a.unbind().bind("click",function(){h.addClass(d.popupClass+" "+b+"Main");""===e&&m&&console.log("N\u00e3o existe URL no atributo href");jQuery('<iframe src="'+e+'" frameborder="0" allowtransparency="true"></iframe>').appendTo(l.addClass(d.popupClass+" "+b));c.show({loading:!0});c.positioning();c.close();return!1})})},newsletter:function(a){a.clone().appendTo(l.addClass(d.popupClass+
" newsletterPopup"));h.addClass(d.popupClass+" newsletterMain");c.show();c.positioning();c.close()},quickView:function(a){a=b.find(d.quickViewClass);var e=function(){a.filter(":not(.quickViewLinkActivated)").addClass("quickViewLinkActivated").bind("click",function(){jQuery('<iframe src="'+jQuery(this).attr("href")+'" frameborder="0" allowtransparency="true"></iframe>').appendTo(l.addClass(d.popupClass+" productQuickView"));h.addClass(d.popupClass+" quickViewMain");c.show({loading:!0});c.positioning();
c.close();return!1})};e();r.ajaxStop(e)},paymentForms:function(a){var e="",y=function(){var a=b.find(".see-other-payment-method-link");if(1>a.length)return m&&console.log("Url das formas de pagamento n\u00e3o encontrado. \n Verifique se o controle esta na p\u00e1gina.\n("+a.selector+")"),!1;e=/http:(.*?)(?=\&)/.exec(a[0].getAttribute("onclick").toString())[0]||"#onclickError"};y();a.bind("click",function(){jQuery("<iframe src='"+e+"' frameborder='0' allowtransparency='true'></iframe>").appendTo(l.addClass(d.popupClass+
" paymentFormsPopup"));h.addClass(d.popupClass+" paymentFormsMain");c.show({loading:!0});c.positioning();c.close();return!1});r.ajaxStop(y)},calculateShipping:function(){r.ajaxStop(function(){var a=b.find("#calculoFrete").children();if(1>a.length)return!1;a.find("span.cep-busca a").attr("target","_blank");a.appendTo(l.addClass(d.popupClass+" shippingCalculationPopup"));h.addClass(d.popupClass+" shippingCalculationMain");c.show();c.positioning();c.close()})},giftList:function(a){a.appendTo(l.addClass(d.popupClass+
" giftListPopup"));h.addClass(d.popupClass+" giftListMain");c.show();c.positioning();c.close({clickCallback:d.closeCallback})},cartCheckoutAlert:function(a){a.appendTo(l.addClass(d.popupClass+" cartCheckoutAlertPopup"));h.addClass(d.popupClass+" cartCheckoutAlertMain");c.show();c.positioning();c.close()},freeContent:function(a){a.appendTo(l.addClass(d.popupClass+" freeContentPopup"));h.addClass(d.popupClass+" freeContentMain");c.show();c.positioning();c.close()},closeNow:function(){c.close({closeNow:!0})},
giftListReferFriend:function(a){var b=function(){var a=$(this).attr("href");if("undefined"===typeof a||""===a)return m&&console.log("[Erro] Url do popup n\u00e3o encontrada."),!1;l.addClass(d.popupClass+" freeContentPopup").load(a);h.addClass(d.popupClass+" giftListReferFriendMain");c.show({loading:!0});c.positioning();c.close();return!1},e=function(){a.unbind().bind("mouseenter",function(){a.unbind().bind("click",b)})};e();r.ajaxStop(e)},productReferAFriend:function(a){var b=jQuery('<div class="referAFriendPopUpWrap"></div>');
a.bind("click",function(){var a=(jQuery(this).parent().find("#div-referAFriend input").attr("onclick")||"").toString(),a=/\/referAFriend\/Form\/[0-9]+\?/i.exec(a);if(null===a)return alert("Desculpe, n\u00e3o foi poss\u00edvel abrir o formul\u00e1rio."),!1;b.empty().load(a[0],function(){c.positioning()});b.appendTo(l.addClass(d.popupClass+" freeContentPopup"));h.addClass(d.popupClass+" freeContentMain");c.show();c.positioning();c.close();return!1});r.ajaxStop(function(){0<l.find(".referAFriendPopUpWrap #btnFechar").length&&
setTimeout(c.closeNow,1500)})},postRatingComment:function(a){a=a.filter(":not(.popUpPublishReviewActivated)");var b=!1;if(1>a.length)return!1;a.bind("click",function(){var a=jQuery(this).attr("href")||"";if(""===a)return m&&console.log("[Erro] N\u00e3o foi poss\u00edvel obter os dados para abrir o popup de resenha."),!1;a=a.split(")").shift().split("(").pop().split(",");if(3!=a.length)return m&&console.log("[Erro] O array com os dados do cliente retornou um valor inesperado."),!1;if(b)return!1;b=
!0;jQuery.ajax({url:"/publishuserreviewcomment",type:"POST",data:{productId:a[1],clientId:a[0],categoryId:a[2]},success:function(a){var e=jQuery(a);l.addClass(d.popupClass+" userReviewPopup").html(e);h.addClass(d.popupClass+" userReviewPopupMain");c.show({callback:function(){e.find("#txtTituloResenha:hidden").val("titulo_auto");var a=l.find("a#rtAvaliacao_A0"),b=function(){a.attr("title",a.find(".filledRatingStar:last").index()+1||0)};a.find("span").bind("mouseenter",b);a.bind("mouseleave",b)}});
c.positioning();c.close();b=!1},error:function(){b=!1}});return!1}).addClass("popUpPublishReviewActivated");0==jQuery.fn.vtexPopUp2.data.userReviewCount&&r.ajaxStop(function(){l.hasClass("userReviewPopup")&&0==l.find(".formUserComment").children().length&&c.closeNow()});jQuery.fn.vtexPopUp2.data.userReviewCount++}};c.exec();return e},jQuery.fn.vtexPopUp2.data={userReviewCount:0});
(function(q){q.fn.getAttributes=function(){var e={},b=q(this).first();if(!b.length)return this;q.each(b[0].attributes,function(b,m){e[m.name]=m.value});return e}})(jQuery);"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});"function"!=typeof String.prototype.capitalize&&(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()});var vtexscCartHideTimeOut=0;
jQuery.fn.smartCart=function(q){var e,b,h,m,d,l,u,z,r,c,a,F,y,A,B,C,D;e=function(f,a){"object"===typeof console&&("object"===typeof a&&"alerta"===a.toLowerCase()?console.warn("[Smart Cart] "+f):"object"===typeof a&&"info"===a.toLowerCase()?console.info("[Smart Cart] "+f):console.error("[Smart Cart] "+f))};b=jQuery.extend({},{method:1,htmlFormat:2,skuThumbId:3,cartElem:".vtexsc-cart",listElem:".vtexsc-productList",scrollTop:".vtexsc-arrowTop",scrollDown:".vtexsc-arrowBottom",btnOverlayElem:".vtexsc-buttonOverlay",
errorElem:".vtexsc-error",successElem:".vtexsc-success",showCartBtn:".vtexsc-showCart",totalCart:".vtexsc-totalCart",buyButton:".vtexsc-buyButton",asynchronousClass:"btn-add-buy-button-asynchronous",qttText:"",textRemove:"",textMoreOne:"",textMinusOne:"",firstOptionMsg:"Selecione um(a) ",ajaxErroMsg:"Houve um erro ao tentar adicionar/alterar seu produto no carrinho.",changeQttError:"A quantidade selecionada excede nossa disponibilidade de estoque atual.",skuNotSelected:"Selecione o(a) #groupName",
skuNotLocated:"N\u00e3o foi poss\u00edvel obter as informa\u00e7\u00f5es das varia\u00e7\u00f5es deste produto.\nVoc\u00ea ser\u00e1 redirecionado para a p\u00e1gina de detalhes deste produto.",skuUnavailable:"Esta varia\u00e7\u00e3o de produto n\u00e3o esta disponp\u00edvel no momento.",regularPricePopupHtml:'<div class="regularPrice">De: <span>R$ #regularPrice</span></div>',newPricePopupHtml:'<div class="newPrice">Por: <span>R$ #newPrice</span></div>',installmentPricePopupHtml:'<div class="installmentPrice">ou em at\u00e9 <span>#installmentQtt</span>X de <span>R$ #installmentValue</span> sem juros</div>',
fullPricePopupHtml:'<div class="fullPrice">\u00e0 vista</div>',currency:"R$",cartHideTime:5E3,notAjaxStop:!1,updateCart:!1,noCart:!1,noCartCallback:function(){},callback:function(){},ajaxCallback:function(){},succesShow:function(f){f.show()},cartShow:function(f,a){f.slideDown(a)},cartHide:function(f,a,b){clearTimeout(vtexscCartHideTimeOut);vtexscCartHideTimeOut=setTimeout(function(){a(f)},b)},resetNewItem:function(f){setTimeout(function(){f.removeClass("vtexsc-newItem")},2500)},getSkuHtml:function(f){return f.find("ul.topic")},
formatSkuPopup:function(f,a,b,c){var k,j,n,d,g;k=jQuery('<div class="skuWrap_"><div class="selectSkuTitle">Selecione a varia\u00e7\u00e3o do produto</div></div>');g=jQuery('<div class="vtexsm-prodTitle"></div>');j=jQuery('<div class="skuListWrap_"></div>');n=jQuery('<div class="vtexsc-buttonWrap clearfix"><a href="#" class="vtexsc-buyButton"></a></div>');d=jQuery('<div class="vtexsc-skusWrap"></div>');jQuery("div");f.appendTo(j);a.appendTo(d);j.appendTo(d);b.appendTo(d);g.append(c);g.appendTo(k);
d.appendTo(k);n.appendTo(k);return k}},q);h=jQuery(this);m=jQuery("");d=jQuery(b.cartElem);l=!0;q=!1;u={};1>h.length&&0<d.length&&(q=!0,l=!1);if(1>h.length&&l)return h;if(!b.noCart&&1>d.length&&l)return e("Elemento do carrinho n\u00e3o encontrado \n ("+d.selector+")"),!1;var p=d.find(b.listElem);if(!b.noCart&&1>p.length&&l)return e("Lista de produtos n\u00e3o encontrada \n ("+p.selector+")"),!1;jQuery(b.errorElem);z=jQuery(b.successElem)||m;r=jQuery(b.showCartBtn)||m;c={};a=d.find(b.scrollDown)||
m;F=d.find(b.scrollTop)||m;l=jQuery(b.totalCart)||m;y=jQuery("<span class='vtexsc-text'></span>");A=jQuery("<div class='vtexsc-overlay'></div>");B=m;l.children(".vtexsc-overlay").length||l.append(A);D=l.children(".vtexsc-text");D.length?C=D:(l.append(y),C=y);var g={buyButtons:function(){h.not(".vtexsm_activated").each(function(){var f=jQuery(this);!f.hasClass("actionActivated")&&g.buyAsynchronous(f)&&f.addClass("actionActivated").bind("click",function(){if("string"===typeof selecionarSKU&&-1<(f.attr("href")||
"").indexOf(selecionarSKU))return!0;var a=g.getSku(f);""!==a?g.skuToCart(f,a):e("O Sku n\u00e3o foi obtido! A execu\u00e7\u00e3o parou");return!1})}).addClass("vtexsm_activated")},buyAsynchronous:function(f){if(!f.hasClass(b.asynchronousClass))return!0;f.unbind("click").removeClass(b.asynchronousClass).addClass("asynchronousBuyButton");if(f.hasClass("remove-href"))return!0;g.multiplesSkus(f);return!1},multiplesSkus:function(f){f.bind("click",function(){var a,c,d,k;a=f.attr("href")||"";if(""==a)return e("N\u00e3o foi poss\u00edvel obter a URL para a p\u00e1gina do produto \n m\u00e9todo: multiplesSkus"),
!1;c=f.siblings(b.btnOverlayElem).show();d=jQuery('<div class="vtexsc-skuProductImage"></div>');k=jQuery('<div class="vtexsc-skuProductPrice"></div>');g.skuProductImg(d,f);jQuery.ajax({url:a,success:function(b){g.productSuccess(b,a,c,d,k,f)},error:function(){e("Erro ao requisitar a p\u00e1gina do produto via Ajax")}});return!1})},skuProductImg:function(f,a){g.getParent(a,"li").find("a[href$='/p'] img").first().clone().appendTo(f)},getParent:function(f,a){var b;b=f.parent();return b.is("html")?jQuery(""):
b.is(a)?b:b.length?g.getParent(b,a):b},productSuccess:function(a,c,d,v,k,j){var n,w,s;n=jQuery(a);a=b.getSkuHtml(n);w=!1;s=null;n.filter("script:not([src])").each(function(){var a=this.innerHTML;if(-1<a.indexOf("myJSONSkuSpecification"))return a=a.replace(":,",':"",').replace(":}",':""}').replace(":]",':""]'),eval(a),s=myJSONSkuSpecification,w=!0,!1});if(!w)return e("N\u00e3o foi poss\u00edvel localizar as especifica\u00e7\u00f5es do SKU. \n A p\u00e1gina ser\u00e1 redirecionada!"),setTimeout(function(){document.location.href=
c},500),!1;j=g.getParent(j,"li");n=j.find("a:first").attr("title");j="undefined"!=typeof n&&""!=n?n:j.find("a:eq(1)").text();b.formatSkuPopup(a,v,k,j).addClass("freeContent vtexsc-selectSku").vtexPopUp2({popupClass:"vtexsm-popupContent"});s=g.specificationsReorder(s);B=jQuery(b.buyButton)||m;j=a.find("[type=checkbox]");n=a.find("select.sku-selector");if(0<j.length)tempChks=jQuery(""),j.each(function(){var a=jQuery(this),f=a.getAttributes(),f=jQuery('<input type="radio" name="'+f.name+'" specification="'+
(f.specification||"")+'" class="'+(f["class"]||"")+'" id="'+(f.id||"")+'" value="'+f.value+'" />');a.after(f);a.remove();tempChks=tempChks.add(f)}),j=tempChks,d.hide(),1<s.specifications?g.multipleSkuConfigCheckbox(a,s,j,v,k):g.skuConfigCheckbox(a,s,j,v,k),g.buyButtonCheckbox(j,s,a,c,d);else if(0<n.length){if(1<n.length)return e("Este plugin ainda n\u00e3o suporta mais de 1 selectbox.");d.hide();g.skuConfigSelectbox(a,s,n,v,k);g.buyButtonSelectbox(n,s,a,c,d)}else e("Elemento n\u00e3o previsto")},
skuConfigSelectbox:function(a,c,d,e,k){var j;a=d.find("option:first");j=d.parent().siblings(".specification");""==a.text().trim()&&""!=b.firstOptionMsg&&a.text(b.firstOptionMsg+j.text().capitalize());d.change(function(){""!=$(this).val()&&g.actionsBySku(c,$(this).val(),e,k)})},buyButtonSelectbox:function(a,b,c,d,k){B.bind("click",function(){var j,d,v;d=a.val();if(""==d)return alert("Selcione a especifica\u00e7\u00e3o \u201c"+c.find(".specification").text()+"\u201d"),!1;if("undefined"==typeof b.skus[d])return e("N\u00e3o foi poss\u00edvel obter o SKU na lista de especifica\u00e7\u00f5es");
j=b.skus[d];v=function(b){b.Availability?(g.skuToCart(m,b.Id,void 0,k),jQuery(".boxPopUp2").vtexPopUp2()):alert("A especifica\u00e7\u00e3o \u201c"+a.find("[value="+d+"]").text()+"\u201d esta indispon\u00edvel.")};"object"==typeof u[j]?v(u[j][0]):jQuery.ajax({url:"/produto/sku/"+j,data:"json",success:function(a,f,b){"object"!==typeof a?e("Erro ao obter informa\u00e7\u00f5es do sku \u201c"+j+"\u201d."):0!=b.status?(obj=a[0],u[obj.Id]=a,v(obj)):e("Erro ao obter informa\u00e7\u00f5es do sku \u201c"+j+
"\u201d.")},error:function(){e("Erro ao obter informa\u00e7\u00f5es do sku \u201c"+j+"\u201d.")}});return!1})},buyButtonCheckbox:function(a,c,d,e,k){B.bind("click",function(){var j=a.filter(":checked");if(2>c.specifications)0<j.length?(j=c.skus[j.val()],"undefined"===typeof j?(alert(b.skuNotLocated),document.location.href=e):"False"===j[1]?alert(b.skuUnavailable):(g.skuToCart(m,j[0],void 0,k),jQuery(".boxPopUp2").vtexPopUp2())):(j=d.find(".specification").eq(0).text()||" varia\u00e7\u00e3o do produto",
alert(b.skuNotSelected.replace("#groupName",j)));else{var n=!1;d.each(function(){var a=jQuery(this);if(1>a.find("input:checked").length)return a=d.find(".specification").eq(a.index()).text()||" varia\u00e7\u00e3o do produto",alert(b.skuNotSelected.replace("#groupName",a)),n=!0,!1});if(!n){var w=[];j.each(function(){w.push(jQuery(this).val())});j=c.skus[w.join(",")];"undefined"===typeof j?(alert(b.skuNotLocated),document.location.href=e):"False"===j[1]?alert(b.skuUnavailable):(g.skuToCart(m,j[0],void 0,
k),jQuery(".boxPopUp2").vtexPopUp2())}}return!1})},specificationsReorder:function(a){var b={};"undefined"!==typeof a.specifications?b.specifications=a.specifications:e("N\u00e3o foi localizado o item \u201cspecifications\u201d do objeto com as especifica\u00e7\u00f5es de SKU.");if("undefined"!==typeof a.combination){var c=a.combination.length;b.combination={};for(var d=0;d<c;d++)for(var k in a.combination[d])if("string"===typeof a.combination[d][k])b.combination[k]=a.combination[d][k].split(",");
else for(var j in a.combination[d][k][0]){b.combination[k]=a.combination[d][k][0][j].split(",");break}}else e("N\u00e3o foi localizado o item \u201ccombination\u201d do objeto com as especifica\u00e7\u00f5es de SKU.");if("undefined"!==typeof a.skus){c=a.skus.length;b.skus={};for(d=0;d<c;d++)for(k in a.skus[d])b.skus[k]=a.skus[d][k].split(",")}else e("N\u00e3o foi localizado o item \u201cskus\u201d do objeto com as especifica\u00e7\u00f5es de SKU.");return b},getSku:function(a){return a.hasClass("asynchronousBuyButton")?
(a.attr("id")||"").replace("idprod",""):(a.attr("href")||"").split("dSku=")[1]||""},selectUniqueSku:function(a){a.each(function(){var a,b;a=$(this);b=a.find("input");1==b.length&&(b.attr("checked",!0).trigger("change").trigger("click"),a.hide())})},multipleSkuConfigCheckbox:function(a,b,c,d,k){2<b.specifications&&e("Esta exten\u00e3o n\u00e3o foi testada com mais de dois tipos de SKUs","Alerta");a.filter(":first").find("input").each(function(){var a=jQuery(this),c=a.val(),f,d,k=!0;if("undefined"!=
typeof c&&""!=c&&(f=b.combination[c],"undefined"!=typeof f)){d=f.length;for(var g=0;g<d;g++)"object"==typeof b.skus[c+","+f[g]]&&"True"==b.skus[c+","+f[g]][1]&&(k=!1);k&&a.addClass("item_unavaliable").next("label").addClass("item_unavaliable")}});c.bind("change",function(){var c,e,x;c=jQuery(this);x=c.attr("id").split("_");e=x[1]||x.pop();a.not(":eq("+e+")").find("input").each(function(){var a=jQuery(this),f;f="0"==e?c.val()+","+a.val():a.val()+","+c.val();"object"==typeof b.skus[f]&&(c.is(":checked")&&
a.is(":checked"))&&g.actionsBySku(b,f,d,k);"object"==typeof b.skus[f]&&"False"==b.skus[f][1]&&(a.addClass("item_unavaliable").next("label").addClass("item_unavaliable"),c.addClass("item_unavaliable").next("label").addClass("item_unavaliable"))})});g.selectUniqueSku(a);a.find("input").length<=a.length&&e("Deve ser desenvolvida uma fun\u00e7\u00e3o p/ varia\u00e7\u00f5es de SKUs em que todas tem apenas uma op\u00e7\u00e3o","Aviso")},actionsBySku:function(a,c,d,v){var k,j,n,h,s,l,m,p,t,E;k=d.find("img");
1>k.length&&(k=jQuery('<img src="" alt="" />'),d.append(k));j=a.skus[c][0];E=function(a){n=g.getImageUrl(a,b.skuThumbId);"string"==typeof n[0]?k.attr("src",n[0]):e("[2] N\u00e3o foi poss\u00edvel obter a imagem p/ o sku \u201c"+j+"\u201d.");s=jQuery(b.regularPricePopupHtml.replace("#regularPrice",g.numberFormat(a.ListPrice))).hide();l=jQuery(b.newPricePopupHtml.replace("#newPrice",g.numberFormat(a.Price)));p=jQuery(b.installmentPricePopupHtml.replace("#installmentQtt",a.BestInstallmentNumber).replace("#installmentValue",
g.numberFormat(a.BestInstallmentValue))).hide();t=jQuery(b.fullPricePopupHtml).hide();m=jQuery("").add(s).add(l).add(p).add(t);a.Price<a.ListPrice&&s.show();1<a.BestInstallmentNumber?p.show():t.show();v.html(m)};"object"==typeof u[j]?E(u[j][0]):jQuery.ajax({url:"/produto/sku/"+j,data:"json",success:function(a,b,c){"object"!==typeof a?e("[1] N\u00e3o foi poss\u00edvel obter a imagem p/ o sku \u201c"+j+"\u201d."):0!=c.status?(h=a[0],u[h.Id]=a,E(h)):e("[3] N\u00e3o foi poss\u00edvel obter a imagem p/ o sku \u201c"+
j+"\u201d.")},error:function(){e("N\u00e3o foi poss\u00edvel obter a imagem p/ o sku \u201c"+j+"\u201d.")}})},numberFormat:function(a){var b="",c="",b="",d,k;a=a.toFixed(2).split(".");c=a[0].split("");d=0;k=c.length;for(var j=a[0].length;0<j;j--)c=a[0].substr(j-1,1),d++,0==d%3&&k>d&&(c="."+c),b=c+b;return b=b+","+a[1]},getImageUrl:function(a,b){var c=[];if(1>a.Images.length)return e("N\u00e3o foram encontradas imagens para o SKU: "+a.Id,"Alerta"),c;for(array in a.Images)for(img in a.Images[array])if(a.Images[array][img].ArchiveTypeId==
b){c.push(a.Images[array][img].Path);break}return c},skuConfigCheckbox:function(a,b,c,d,k){a.each(function(){var j=jQuery(this),e=j.find("[type=radio]"),h;for(h in b.skus)"False"===b.skus[h][1]&&e.filter("[value='"+h+"']").addClass("item_unavaliable").next("label").addClass("item_unavaliable");e.bind("change",function(){var h,l,m,w;w=1<b.specifications;h=jQuery(this);l=[];e.not(h).attr("checked",!1);m=h.val()||"_";"object"==typeof b.skus[m]&&h.is(":checked")&&g.actionsBySku(b,m,d,k);if(h.is(":checked")){if(c.removeClass("sku-picked").next("label").removeClass("sku-picked"),
h.addClass("sku-picked").next("label").addClass("sku-picked"),w){var p=[(h.attr("name")||"").replace("espec_",""),h.val()||""];a.not(j).each(function(){var a=[];jQuery(this).find("[type=radio]").each(function(){a[p[0]]=p[1];a[(this.attr("name")||"").replace("espec_","")]=this.val()||"";l.push(a)})})}}else h.removeClass("sku-picked").next("label").removeClass("sku-picked"),w&&c.removeClass("item_unavaliable").next("label").removeClass("item_unavaliable")})})},skuToCart:function(a,c,d,h){d=d||1;if(isNaN(parseInt(c)))return e("O SKU n\u00e3o \u00e9 um n\u00famero: \u201c"+
c+"\u201d"),!1;if(isNaN(parseInt(d)))return e("A quantidade deve ser num\u00e9rica: \u201c"+d+"\u201d"),!1;var k=h||a.siblings(b.btnOverlayElem);k.show();jQuery.ajax({url:"/Site/Carrinho.aspx?idSku="+c+"&quantidade="+d,success:function(a){g.skuToCartAjaxSuccess(k,c,a);g.updateCart();"function"===typeof b.noCartCallback?b.noCartCallback(c):e("O paramentro 'noCartCallback' deve ser obrigat\u00f3riamente uma fun\u00e7\u00e3o")},error:function(){g.skuToCartAjaxError(k)}})},loadCart:function(a){(a||!d.hasClass("preLoaded"))&&
jQuery.ajax({url:"/Site/Carrinho.aspx",success:function(a){g.skuToCartAjaxSuccess(m,0,a,!1);d.addClass("preLoaded");g.scrollAction()},error:function(){g.skuToCartAjaxError(m)}})},skuToCartAjaxSuccess:function(a,c,d,e){a.hide();if(-1<d.indexOf("Ocorreu um erro"))return g.skuToCartAjaxError();a=jQuery(d);b.succesShow(z);switch(b.htmlFormat){case 1:g.formatCartItens(a,c);break;case 2:g.formatCartItens2(a,c)}("undefined"!==typeof e?e:1)&&g.displayCart();b.ajaxCallback()},skuToCartAjaxError:function(a){a.hide();
e("A requisi\u00e7\u00e3o Ajax para adicionar/alterar o SKU no carrinho \n n\u00e3o obteve a resposta esperada. \n Foi retornado um texto contendo o termo \u201cOcorreu um erro\u201d.");alert(b.ajaxErroMsg);return!1},formatCartItens:function(a,d){var e=a.find(".carrinhoTable"),h=0;if(1>e.length)return!1;e.find("tbody tr").each(function(){var a=jQuery("<li></li>"),f=jQuery(this),e=jQuery('<div class="cartSkuImage"></div>');f.find(".sku-imagem").appendTo(e);e.appendTo(a);var e=jQuery('<div class="cartSkuInfo"></div>'),
l=f.find(".boxQuantidade"),m=l.attr("title")||"";c=parseInt(l.val());f.find("h4").appendTo(e);e.append('<div class="cartSkuUnitPrice">'+(f.find(".preco-unitario").html()||"").toString()+"</div>");var l=jQuery('<div class="cartSkuQtt"><span class="cartSkuQttTxt">'+b.qttText+'<span class="vtexsc-skuQtt">'+(c||"")+"</span></span></div>"),x=l.find(".vtexsc-skuQtt");e.append(l);e.appendTo(a);e=jQuery('<div class="cartSkuActions"></div>');jQuery('<span class="cartSkuRemove">'+b.textRemove+"</span>").bind("click",
function(){g.removeSku(a,(f.find("a.excluir").attr("href")||"").split("IdSkuRm=").pop())}).appendTo(e);var q=jQuery('<span class="cartSkuMoreOne">'+b.textMoreOne+"</span>").bind("click",function(){var b=g.changeQantity([a,x],m,c);isNaN(b)||(c=b)}),r=jQuery('<span class="cartSkuMinusOne">'+b.textMinusOne+"</span>").bind("click",function(){var b=g.changeQantity([a,x],m,c,-1);isNaN(b)||(c=b)}),t=jQuery('<span class="cartSkuChangeQttWrap"></span>');t.append(q).append(r);l.append(t);e.append(t.clone());
e.appendTo(a);"undefined"!==typeof d&&m==d&&b.resetNewItem(a.addClass("vtexsc-newItem"));0===h&&p.empty();a.append("<div class='vtexsc-overlay'></div>");a.appendTo(p);h++})},formatCartItens2:function(a,d){var e=a.find(".carrinhoTable"),h=0;if(1>e.length)return!1;e.find("tbody tr").each(function(){var a=null,f=jQuery(this),e=jQuery("<tr></tr>");e.addClass(f.attr("class")||"");a=jQuery('<td class="cartSkuImage"></td>');f.find(".sku-imagem").appendTo(a);a.appendTo(e);a=jQuery('<td class="cartSkuName"></td>');
f.find("h4").appendTo(a);a.appendTo(e);a=jQuery('<td class="cartSkuPrice"></td>');a.append('<div class="cartSkuUnitPrice">'+(f.find(".preco-unitario").html()||"").toString()+"</div>");a.appendTo(e);var a=jQuery('<td class="cartSkuQunatity"></td>'),l=f.find(".boxQuantidade"),m=l.attr("title")||"";curQtt=parseInt(l.val());var l=jQuery('<div class="cartSkuQtt"><span class="cartSkuQttTxt">'+b.qttText+'<span class="vtexsc-skuQtt">'+(curQtt||"")+"</span></span></div>"),x=l.find(".vtexsc-skuQtt");a.append(l);
a.appendTo(e);c["_"+m]=curQtt;a=jQuery('<td class="cartSkuActions"></td>');remove=jQuery('<span class="cartSkuRemove">'+b.textRemove+"</span>").bind("click",function(){g.removeSku(e,(f.find("a.excluir").attr("href")||"").split("IdSkuRm=").pop())}).appendTo(a);var q=jQuery('<span class="cartSkuMoreOne">'+b.textMoreOne+"</span>").bind("click",function(){var a=g.changeQantity([e,x],m,c["_"+m]);isNaN(a)||(c["_"+m]=a)}),r=jQuery('<span class="cartSkuMinusOne">'+b.textMinusOne+"</span>").bind("click",function(){var a=
g.changeQantity([e,x],m,c["_"+m],-1);isNaN(a)||(c["_"+m]=a)}),t=jQuery('<span class="cartSkuChangeQttWrap"></span>');t.append(q).append(r);l.append(t);a.append(t.clone());a.appendTo(e);"undefined"!==typeof d&&m==d&&b.resetNewItem(e.addClass("vtexsc-newItem"));0===h&&p.empty();e.find(">td").append("<div class='vtexsc-overlay'></div>");e.appendTo(p);h++});g.totalCartFormat(e)},totalCartFormat:function(a){C.html(a.find("tfoot .subtotal .preco-total").text())},scrollNewItem:function(){p.parent().stop(!0,
!0).animate({scrollTop:p.height()||0},"fast")},updateCart:function(){b.noCart||(A.show(),jQuery.ajax({url:"/no-cache/QuantidadeItensCarrinho.aspx",success:g.upCartAjaxSuccess,error:g.upCartAjaxError}))},upCartAjaxError:function(){e("Erro ao tentar atualizar o carrinho!")},upCartAjaxSuccess:function(a){var b;a=jQuery(a);b=a.find(".total-cart").text();C.text("R$ "+b.substring(b.search(/\d/)));a=a.filter(".cartInfoWrapper");0<a.length?jQuery(".cartInfoWrapper").html(a.html()):e("O carrinho n\u00e3o foi atualizado pois \u201c.cartInfoWrapper\u201d n\u00e3o foi encontrado no retorno da requisi\u00e7\u00e3o.");
A.hide()},displayCart:function(){b.cartShow(d,g.scrollNewItem);b.cartHide(d,g.hideCart,b.cartHideTime)},removeSku:function(a,c){var d=c||"";if(isNaN(parseInt(d)))return e("O SKU deve ser num\u00e9rico: \u201c"+d+"\u201d"),!1;var h=a.find(".vtexsc-overlay").show()||m;jQuery.ajax({url:"/no-cache/CarrinhoRemove.aspx?IdSkuRm="+d,success:function(){2===b.htmlFormat?a.hide(function(){g.scrollAction()}).remove():a.slideUp(function(){g.scrollAction();jQuery(this).remove()});h.hide();g.updateCart()}})},scrollAction:function(){d.filter(":hidden").addClass("calculatingTheHeight").css("visibility",
"hidden").show();var c=p.parent();2===b.htmlFormat?(c.height(),p.find("tr:visible")):(c.height(),p.children().filter(":visible"));d.filter(".calculatingTheHeight").removeClass("calculatingTheHeight").hide().css("visibility","visible");a.unbind("click").bind("click",function(){var a=p.find("tr:first"),a=0<a.length?a:p.find("li:first");c.stop(!0,!0).animate({scrollTop:"+="+a.outerHeight(!0)+"px"},"fast")});F.unbind("click").bind("click",function(){var a=p.find("tr:first"),a=0<a.length?a:p.find("li:first");
c.stop(!0,!0).animate({scrollTop:"-="+a.outerHeight(!0)+"px"},"fast")})},changeQantity:function(a,d,e,h){var k=h||1;if(2>e&&0>k)return e;var j=a[0].find(".vtexsc-overlay").show()||m;e+=k;jQuery.ajax({url:"/no-cache/CarrinhoUpdate.aspx?IdSku="+d+"&quantidade="+e,success:function(h){j.hide();if(-1<h.indexOf("Ocorreu um erro"))return g.skuToCartAjaxError(m);0<jQuery(h).filter(".cart-items-detail").length?(alert(b.changeQttError),c["_"+d]=e-k):a[1].text(e);g.updateCart()},error:function(){g.skuToCartAjaxError(m)}});
return e},hideCart:function(a){a.slideUp()},mouseCartActions:function(){var a={mouseenter:function(){clearTimeout(vtexscCartHideTimeOut);b.cartShow(d,function(){})},mouseleave:function(){b.cartHide(d,g.hideCart,b.cartHideTime)}};d.filter(":not(.mouseActivated)").bind(a).addClass("mouseActivated");r.filter(":not(.mouseActivated)").bind(a).addClass("mouseActivated")},onlyCart:function(){g.loadCart();g.mouseCartActions()}};if(b.updateCart)g.updateCart();else if(q)g.onlyCart();else{switch(b.method){case 1:g.buyButtons()}g.loadCart();
g.mouseCartActions();b.callback()}return h};